# Shower Studies

This repository contains studies related to the development of the shower detection algorithm for the Muon DT L1T of CMS.

The studies are based on the shower primitives generated using the CMSSW emulator ([DTTrigPhase2ShowerProd.cc](https://github.com/cms-sw/cmssw/blob/master/L1Trigger/DTTriggerPhase2/plugins/DTTrigPhase2ShowerProd.cc)). Using this plugin, DTNTuples are created with the code available in this repository: [DTNtuples](https://github.com/DanielEstrada971102/DTNtuples/tree/shower_ntuples).

The NTuples were generated from the Monte Carlo sample **6 TeV Zprime candidate to have a source of showers**: ```/ZprimeToMuMu_M-6000_TuneCP5_14TeV-pythia8/Phase2HLTTDRWinter20DIGI-PU200_110X_mcRun4_realistic_v3-v2/GEN-SIM-DIGI-RAW``` (Note: this sample appears as INVALID in DAS).

The subdirectories contain specific studies on the mentioned data:

1. `efficiencies`: This section analyzes the efficiency of the shower algorithm through comparisons based on the simhits of each event. "Real" showers are constructed depending on whether the simulation hits are produced by electrons or not. With this truth definition, the hit and miss fractions of the algorithm are estimated.

2. `rates`: This section estimates the rate of the generated shower primitives.

3. `agreement`: An important aspect is analyzing the agreement between the shower primitives generated by the emulator and those that will be produced by the algorithm in firmware. Using DIGI-level information (hits), `firmware-emulator` is used to reproduce the expected firmware output, which is then compared to the primitives obtained from the CMSSW plugin.

4. `filter-studies`: Before the DT primitives are sent to the track finders, they can go through an intermediate stage known as the "Barrel Filter." In this stage, more refined algorithms are applied to cross the information of DT, shower, and RPC primitives. This directory contains studies conducted to evaluate which filtering and selection processes are relevant to include in this stage.

5. `digis`: Initial analyses of the NTuple digis (DEPRECATED).

Each directory contains more details about the specific tasks performed there. The analyses presented here assume that the frameworks [DTPatternRecognition](https://github.com/DanielEstrada971102/DTPatternRecognition) and [mplDTs](https://github.com/DanielEstrada971102/mplDTs) are being used. Specific versions are listed in the `requeriments.txt` file.